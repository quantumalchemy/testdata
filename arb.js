var oddsData = [{"id":"cd5df834f45053bfaba6f2f09c44a113","sport_key":"basketball_nba","sport_title":"NBA","commence_time":"2023-03-13T23:10:00Z","home_team":"Detroit Pistons","away_team":"Indiana Pacers","bookmakers":[{"key":"draftkings","title":"DraftKings","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Detroit Pistons","price":135},{"name":"Indiana Pacers","price":-155}]}]},{"key":"fanduel","title":"FanDuel","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Detroit Pistons","price":134},{"name":"Indiana Pacers","price":-158}]}]},{"key":"betmgm","title":"BetMGM","last_update":"2023-03-13T16:10:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:58Z","outcomes":[{"name":"Detroit Pistons","price":130},{"name":"Indiana Pacers","price":-155}]}]},{"key":"betus","title":"BetUS","last_update":"2023-03-13T16:10:23Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:23Z","outcomes":[{"name":"Detroit Pistons","price":140},{"name":"Indiana Pacers","price":-160}]}]},{"key":"williamhill_us","title":"William Hill (US)","last_update":"2023-03-13T16:11:13Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:11:13Z","outcomes":[{"name":"Detroit Pistons","price":140},{"name":"Indiana Pacers","price":-165}]}]},{"key":"mybookieag","title":"MyBookie.ag","last_update":"2023-03-13T16:10:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:58Z","outcomes":[{"name":"Detroit Pistons","price":121},{"name":"Indiana Pacers","price":-147}]}]},{"key":"barstool","title":"Barstool Sportsbook","last_update":"2023-03-13T16:09:49Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:09:49Z","outcomes":[{"name":"Detroit Pistons","price":128},{"name":"Indiana Pacers","price":-152}]}]},{"key":"betrivers","title":"BetRivers","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Detroit Pistons","price":128},{"name":"Indiana Pacers","price":-152}]}]},{"key":"sugarhouse","title":"SugarHouse","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Detroit Pistons","price":128},{"name":"Indiana Pacers","price":-152}]}]},{"key":"twinspires","title":"TwinSpires","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Detroit Pistons","price":128},{"name":"Indiana Pacers","price":-152}]}]},{"key":"unibet_us","title":"Unibet","last_update":"2023-03-13T16:10:23Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:23Z","outcomes":[{"name":"Detroit Pistons","price":128},{"name":"Indiana Pacers","price":-152}]}]},{"key":"foxbet","title":"FOX Bet","last_update":"2023-03-13T16:06:54Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:06:54Z","outcomes":[{"name":"Detroit Pistons","price":120},{"name":"Indiana Pacers","price":-167}]}]},{"key":"pointsbetus","title":"PointsBet (US)","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Detroit Pistons","price":130},{"name":"Indiana Pacers","price":-150}]}]},{"key":"lowvig","title":"LowVig.ag","last_update":"2023-03-13T16:09:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:09:58Z","outcomes":[{"name":"Detroit Pistons","price":135},{"name":"Indiana Pacers","price":-155}]}]},{"key":"betonlineag","title":"BetOnline.ag","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Detroit Pistons","price":135},{"name":"Indiana Pacers","price":-156}]}]},{"key":"bovada","title":"Bovada","last_update":"2023-03-13T16:08:15Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:08:15Z","outcomes":[{"name":"Detroit Pistons","price":135},{"name":"Indiana Pacers","price":-160}]}]},{"key":"wynnbet","title":"WynnBET","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Detroit Pistons","price":135},{"name":"Indiana Pacers","price":-159}]}]},{"key":"circasports","title":"Circa Sports","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Detroit Pistons","price":131},{"name":"Indiana Pacers","price":-159}]}]},{"key":"superbook","title":"SuperBook","last_update":"2023-03-13T16:10:24Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:24Z","outcomes":[{"name":"Detroit Pistons","price":140},{"name":"Indiana Pacers","price":-160}]}]}]},{"id":"c506e4b99e91a74455df8e1774f0dc0b","sport_key":"basketball_nba","sport_title":"NBA","commence_time":"2023-03-13T23:40:00Z","home_team":"Atlanta Hawks","away_team":"Minnesota Timberwolves","bookmakers":[{"key":"draftkings","title":"DraftKings","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":180}]}]},{"key":"williamhill_us","title":"William Hill (US)","last_update":"2023-03-13T16:11:13Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:11:13Z","outcomes":[{"name":"Atlanta Hawks","price":-225},{"name":"Minnesota Timberwolves","price":185}]}]},{"key":"lowvig","title":"LowVig.ag","last_update":"2023-03-13T16:09:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:09:58Z","outcomes":[{"name":"Atlanta Hawks","price":-208},{"name":"Minnesota Timberwolves","price":178}]}]},{"key":"betonlineag","title":"BetOnline.ag","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Atlanta Hawks","price":-208},{"name":"Minnesota Timberwolves","price":178}]}]},{"key":"bovada","title":"Bovada","last_update":"2023-03-13T16:08:15Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:08:15Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"wynnbet","title":"WynnBET","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Atlanta Hawks","price":-213},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"fanduel","title":"FanDuel","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":176}]}]},{"key":"superbook","title":"SuperBook","last_update":"2023-03-13T16:10:24Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:24Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":180}]}]},{"key":"betmgm","title":"BetMGM","last_update":"2023-03-13T16:10:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:58Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":170}]}]},{"key":"betus","title":"BetUS","last_update":"2023-03-13T16:10:23Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:23Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"pointsbetus","title":"PointsBet (US)","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"circasports","title":"Circa Sports","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Atlanta Hawks","price":-209},{"name":"Minnesota Timberwolves","price":168}]}]},{"key":"mybookieag","title":"MyBookie.ag","last_update":"2023-03-13T16:10:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:58Z","outcomes":[{"name":"Atlanta Hawks","price":-204},{"name":"Minnesota Timberwolves","price":164}]}]},{"key":"barstool","title":"Barstool Sportsbook","last_update":"2023-03-13T16:09:49Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:09:49Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"betrivers","title":"BetRivers","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"sugarhouse","title":"SugarHouse","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"twinspires","title":"TwinSpires","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"unibet_us","title":"Unibet","last_update":"2023-03-13T16:10:23Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:23Z","outcomes":[{"name":"Atlanta Hawks","price":-210},{"name":"Minnesota Timberwolves","price":175}]}]},{"key":"foxbet","title":"FOX Bet","last_update":"2023-03-13T16:06:54Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:06:54Z","outcomes":[{"name":"Atlanta Hawks","price":-227},{"name":"Minnesota Timberwolves","price":160}]}]}]},{"id":"8e66b055d9a3546e8a78fdd37fba90f8","sport_key":"basketball_nba","sport_title":"NBA","commence_time":"2023-03-13T23:40:00Z","home_team":"Dallas Mavericks","away_team":"Memphis Grizzlies","bookmakers":[{"key":"fanduel","title":"FanDuel","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Dallas Mavericks","price":102},{"name":"Memphis Grizzlies","price":-120}]}]},{"key":"draftkings","title":"DraftKings","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-120}]}]},{"key":"betmgm","title":"BetMGM","last_update":"2023-03-13T16:10:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:58Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-120}]}]},{"key":"williamhill_us","title":"William Hill (US)","last_update":"2023-03-13T16:11:13Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:11:13Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-120}]}]},{"key":"barstool","title":"Barstool Sportsbook","last_update":"2023-03-13T16:09:49Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:09:49Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-118}]}]},{"key":"betrivers","title":"BetRivers","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-118}]}]},{"key":"sugarhouse","title":"SugarHouse","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-118}]}]},{"key":"twinspires","title":"TwinSpires","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-118}]}]},{"key":"unibet_us","title":"Unibet","last_update":"2023-03-13T16:10:23Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:23Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-118}]}]},{"key":"foxbet","title":"FOX Bet","last_update":"2023-03-13T16:06:54Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:06:54Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-139}]}]},{"key":"pointsbetus","title":"PointsBet (US)","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Dallas Mavericks","price":105},{"name":"Memphis Grizzlies","price":-125}]}]},{"key":"mybookieag","title":"MyBookie.ag","last_update":"2023-03-13T16:10:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:58Z","outcomes":[{"name":"Dallas Mavericks","price":-116},{"name":"Memphis Grizzlies","price":-105}]}]},{"key":"betonlineag","title":"BetOnline.ag","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Dallas Mavericks","price":-103},{"name":"Memphis Grizzlies","price":-118}]}]},{"key":"lowvig","title":"LowVig.ag","last_update":"2023-03-13T16:09:58Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:09:58Z","outcomes":[{"name":"Dallas Mavericks","price":-103},{"name":"Memphis Grizzlies","price":-117}]}]},{"key":"bovada","title":"Bovada","last_update":"2023-03-13T16:08:15Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:08:15Z","outcomes":[{"name":"Dallas Mavericks","price":105},{"name":"Memphis Grizzlies","price":-125}]}]},{"key":"wynnbet","title":"WynnBET","last_update":"2023-03-13T16:10:22Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:22Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-120}]}]},{"key":"circasports","title":"Circa Sports","last_update":"2023-03-13T16:10:57Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:57Z","outcomes":[{"name":"Dallas Mavericks","price":103},{"name":"Memphis Grizzlies","price":-125}]}]},{"key":"superbook","title":"SuperBook","last_update":"2023-03-13T16:10:24Z","markets":[{"key":"h2h","last_update":"2023-03-13T16:10:24Z","outcomes":[{"name":"Dallas Mavericks","price":100},{"name":"Memphis Grizzlies","price":-120}]}]}]}];

$(document).ready(function() {
/// START ajax call
// $.getJSON("https://raw.githubusercontent.com/quantumalchemy/testdata/main/api.the-odds-api.com.json", function(data) {
  // Loop through each event in the JSON data

  for (var i = 0; i < oddsData.length; i++) {
    var event = oddsData[i];

    // Loop through each bookmaker's odds for this event
    var total = 0;
    var bookmakerNames = [];
    var bookmakerOdds = [];
    var bookmakerTeam = [];
    for (var j = 0; j < event.bookmakers.length; j++) {
      var bookmaker = event.bookmakers[j];
      for (var k = 0; k < bookmaker.markets.length; k++) {
        var market = bookmaker.markets[k];

        for (var l = 0; l < market.outcomes.length; l++) {
          var outcome = market.outcomes[l];
          var odds_team = outcome.name;
          var odds = parseFloat(outcome.price);


          // Skip any bookmakers with odds of 0
          if (odds === 0) {
            continue;
          }

          total += (1 / odds);
          bookmakerNames.push(bookmaker.title);
          bookmakerTeam.push(odds_team);
          bookmakerOdds.push(odds);
        }
      }
    }

    // Calculate the implied probabilities and arbitrage opportunity
    var impliedProbabilities = [];
    var arbOpportunity = 1 - (1 / total);
    for (var j = 0; j < bookmakerOdds.length; j++) {
      var impliedProbability = bookmakerOdds[j] / total;
      impliedProbabilities.push(impliedProbability);
    }

    // Output the results to the console
    console.log("Event:  home_team: " + event.home_team + "VS  away_team: ",  event.away_team);
   var x = 0;
    for (var j = 0; j < bookmakerNames.length; j++) {
		console.log(" Bookie: " + bookmakerNames[j]);
        console.log(" Team: " + bookmakerTeam[j]);
      console.log("  Price: " + bookmakerOdds[j]);
      console.log("  Probability: " + (impliedProbabilities[j] * 100).toFixed(2) + "%");
      
    }
    console.log("- Arbitrage opportunity: " + (arbOpportunity * 100).toFixed(2) + "%");
  }
//}); END ajax 
//// END
});

